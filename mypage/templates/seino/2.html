{% extends 'base.html' %}

{% block title %}和&nbsp;dinig&nbsp;清乃&nbsp;本店{% endblock %}

{% block content %}

  <style>
          
      p {
          line-height: 1.5;
          padding: 0px;
          margin: 4px;
        }
      

      h2{
          margin: 0px 10px;
        }

      h3{
        margin: 15px 10px;
      }

        

      ul{
          padding-left: 0px;
          margin: 0px 10px;
        }

      
      .date{
          font-size: 16px;
          color: gray;
        }
      
      .margin{
        margin: 15px;
      }

      .margin1{
        margin:0px 4px;
      }

      .emphasize {
          border-left:solid 5px rgb(60, 172, 22);
          padding:0px 8px;
        }

      .title{
          display: inline-block;
          background-color: rgb(220, 160, 30);
          font-weight: bold;
          color: white;
          padding: 0.5px 8px ;
          border-radius: 20px;
          text-align: center;
          margin:2% 0px;
        }

      .layout-container1{
          display: flex;
          justify-content: center;
          width: 1000px; /* 固定幅を維持 */
          margin-bottom: 15px;
        }

      .image-container{
          width: 50%; /* 全体の幅に対する割合 */
          margin: 0px 10px;
        }

      .content-container{
          width: 50%; /* 全体の幅に対する割合 */
          margin: 0px 10px;
        }

      .content-container1{
          display: flex;
          justify-content: left;
          border: solid 2px gray;
          border-radius: 10px;
          background-color: #f4f4f4;
          padding-top: 10px;
          padding-right: 10px;
          margin: 60px 0px 10px 0px;
        }

      .content-container1 img{
          width: 40%;
          margin: auto ;
        }
      .content-container2{
          justify-content: left;
          margin: auto;
        }

      .content-container3{
         justify-content: left;
         border: solid 2px gray;
         border-radius: 10px;
         background-color: #f4f4f4;
         margin-top: 10px;
         padding: 10px;
        }

      .main-image-container {
          width: 100%; /* 画像をコンテナにフィットさせる */
          height: auto;
          position: relative;
          margin: auto;
          border-radius: 10px;
        }

      .main-image-container img {
          width: 100%;
          height: auto;
          display: none; /* 初期では全て非表示 */
          border-radius: 10px;
        }

      .main-image-container img.active {
          display: block; /* 表示する画像だけをブロック表示 */
        }

      .thumbnail-container {
          display: flex;
          justify-content: center;
          margin-top: 10px;
        }

      .thumbnail-container img {
          width: 100px;
          height: 75px;
          margin: 0 5px;
          cursor: pointer;
          opacity: 0.6;
          border-radius: 7px;
        }

      .thumbnail-container img:hover {
          opacity: 1;
        }

      .thumbnail-container img.active-thumbnail {
          border: solid 3px rgb(60, 172, 22);
          opacity: 1;
        }

      .username1 {
          font-size: 15px;
          color: rgb(60, 172, 22);
          font-weight: bold;
          margin-top: 10px;
        }

      .content-box {
          width: 100%;
          border: solid 1.5px gray;
          border-radius: 5px;
          padding: 5px;
          margin: 0px;
        }

      .content-date {
          font-size: 13px;
          text-align: right;
          color: gray;
        }

      /* コメントフォームのスタイル */
      .form-group {
          margin-bottom: 15px;
        }

      /* コメント入力フィールドのスタイル */
      #id_content {
          width: 90%;
          border-radius: 5px;
          border: 1px solid #ccc;
          font-size: 14px;
          margin: 5px 10px;
        }

      /* 送信ボタンのスタイル */
      .custom-submit-btn {
         background-color: rgb(60, 172, 22);
         color: white;
         padding: 10px 20px;
         border: none;
         border-radius: 5px;
         font-size: 14px;
         cursor: pointer;
         margin: 5px 10px;
        }

     .custom-submit-btn:hover {
         background-color: rgb(50, 150, 18);
        }

     .page-container{
         display : flex;
         font-size: 20px;
         margin-bottom: 5px;
        
      }
     
     .page-item{
          display: inline-block;
          background-color: rgb(220, 160, 30);
          color: white;
          padding: 1px 4px ;
          border-radius: 20px;
          text-align: center;
          margin: 0px 4px;
     }

     .page-item:hover{
        color: white;
        background-color:rgb(183, 182, 182);
     }

     .page-item1{
          display: inline-block;
          background-color: none;
          color: black;
          padding: 1px 4px ;
          border-radius: 20px;
          text-align: center;
          margin: 0px 4px;
     }

     .page-item1:hover{
        color: white;
        background-color:rgb(183, 182, 182);
     }

     /* モバイル対応メディアクエリ */
     @media (max-width: 768px) {
         .layout-container1,
         .layout-container {
             width: 100%; /* 画面幅にフィットさせる */
            }

         .image-container,
         .content-container {
             width: 48%; /* スマホでは左右に50%ずつの幅を確保 */
             margin: 10px 1%;
            }

         .main-image-container {
             width: 100%;
             height: auto;
            }

         .thumbnail-container img {
             width: 80px; /* サムネイルのサイズを少し縮小 */
             height: 60px;
            }

         #id_content {
             width: 80%; /* 入力フィールドの幅を狭くしてフィット */
            }
        }

     /* さらに狭い画面向けのメディアクエリ */
     @media (max-width: 480px) {
         .layout-container1,
         .layout-container {
             flex-direction: column; /* 列方向に変更 */
             width: 100%;
         }

         .image-container,
         .content-container {
             width: 100%; /* フル幅に変更 */
             margin: 0;
         }

         .thumbnail-container img {
             width: 60px; /* サムネイルをさらに縮小 */
             height: 45px;
         }

         #id_content {
             width: 90%; /* 入力フィールドをフル幅に */
             margin-left: 0;
         }
     }
 </style>

 {% load static %}
 <body>
      <div class="emphasize">
         <h1>和&nbsp;dinig&nbsp;清乃&nbsp;本店</h1>
     </div>

     <div class="page-container">

        <a href="{% url 'seino' page=1 %}"><div class="page-item1">1</div></a>
        <a href="{% url 'seino' page=2 %}"><div class="page-item">2</div></a>

     </div>


     <div class="layout-container1">
         <div class="image-container">
             <h2>W中華そば(2玉)　&yen;800</h2>
              <div class="date">
                 2024年9月
              </div>
              <!-- メイン画像 -->
             <div class="main-image-container">
                 <img src="{% static 'mypage/seino5.jpeg' %}" class="active" alt="画像1">
                 <img src="{% static 'mypage/seino6.jpeg' %}" alt="画像2">
                 <img src="{% static 'mypage/seino7.jpeg' %}" alt="画像3">
             </div>

             <!-- サムネイル画像のメニュー -->
             <div class="thumbnail-container">
                 <img src="{% static 'mypage/seino5.jpeg' %}" class="active-thumbnail" alt="画像1のサムネイル" data-index="0">
                 <img src="{% static 'mypage/seino6.jpeg' %}" alt="画像2のサムネイル" data-index="1">
                 <img src="{% static 'mypage/seino7.jpeg' %}" alt="画像3のサムネイル" data-index="2">
             </div>
         </div>

         <div class="content-container">
             <div class="content-container1">
                 <img src="{% static 'mypage/seino_point.png' %}" alt="清乃地図">
                 <div class="content-container2">
                  <p><span class="title">場所</span></p>                  
                  <p>有田市野</p>
                  <p><span class="title">営業時間</span></p>
                  <p> 11:00 ~ 13:15　18:00 ~ 20:30</p>
                  <p><span class="title">定休日</span></p>
                  <p>&nbsp;月、日</p>
                 </div>
             </div>

             <div class="content-container3">
                 <p>和歌山らーめんの名店、うらしまのDNAを引き継いだお店。</p>
                 <p>臭みのない豚骨がまろやかで、醬油との相性も抜群なスープ。</p>
                 <p>チャーシューが絶妙な味付けで、全ての要素がまとまった一杯。デフォルトの中華そばの価格は驚異の600円とコスパが良すぎます。</p>
                 <p>立地でなかなか訪問難易度は高いですが、行けば満足すること間違いなしです。</p>        
             </div>
         </div>
      </div>


     <h2>コメント</h2>

     <!-- コメントリストの表示 -->
     <ul>
         {% for comment in comments %}
             <div class="username1"> {{ comment.user.username }} </div> 
             <div class="content-box">{{ comment.content }} 
                 <div class="content-date">{{ comment.created_at|date:"Y/m/d H:i" }}</div>
             </div>
        
         {% empty %}
             <p>コメントはまだありません</p>
         {% endfor %}
     </ul>
 
     {% if user.is_authenticated %}
         <!-- コメント投稿フォーム -->
         <h3>コメントを入力してください</h3>
         <form method="post">
             {% csrf_token %}
     
             <!-- コメントフィールドのカスタマイズ -->
             <div class="form-group">
                 <label for="id_content"></label>
                 {{ form.content }} <!-- フィールドを手動で追加 -->
             </div>
 
             <!-- ボタンのカスタマイズ -->
             <button type="submit" class="custom-submit-btn">コメントを送信</button>
         </form>
 
 
     {% else %}
         <div class="margin">
           <p>コメントを追加するにはログインしてください</p>
           <div class="margin1"><a href="{% url 'login' %}">ここからログイン</a></div>
         </div>
     {% endif %}

     <script>
        // メイン画像とサムネイルの要素を取得
        const mainImages = document.querySelectorAll('.main-image-container img');
        const thumbnails = document.querySelectorAll('.thumbnail-container img');

        thumbnails.forEach((thumbnail, index) => {
            // サムネイルをクリックした時のイベント
            thumbnail.addEventListener('click', function() {
                // 全てのメイン画像とサムネイルのactiveクラスを削除
                mainImages.forEach(img => img.classList.remove('active'));
                thumbnails.forEach(thumb => thumb.classList.remove('active-thumbnail'));

                // クリックしたサムネイルに対応するメイン画像を表示
                mainImages[index].classList.add('active');
                thumbnail.classList.add('active-thumbnail');
            });
        });
     </script>
 </body>

{% endblock %}